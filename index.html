<!DOCTYPE html>
<html lang="hr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>DUƒÜAN SKENER</title>
    <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>DUƒÜAN SKENER</h1>
    </header>

    <main id="app-container">
        <!-- Ekran 1: Poƒçetni ekran -->
        <section id="pocetni-ekran">
            <h2>Dobrodo≈°li!</h2>
            <p>≈†to ≈æelite uƒçiniti?</p>
            <button id="btn-izaberi-trgovinu">Izaberi trgovinu</button>
            <button id="btn-trazi-proizvode-pocetna">Tra≈æi proizvode</button>
            <button id="btn-nastavi-zadnja-trgovina" class="hidden">Nastavi s [Naziv Zadnje Trgovine]</button>
            <button id="btn-povijest">Povijest</button>
        </section>

        <!-- Ekran 2: Odabir trgovine -->
        <section id="ekran-odabir-trgovine" class="hidden">
            <h2>Odaberi trgovinu:</h2>
            <select id="select-trgovina">
                <option value="">Uƒçitavanje trgovina...</option>
            </select>
            <button id="btn-potvrdi-trgovinu" disabled>Potvrdi odabir</button>
            <button id="btn-nazad-na-pocetnu-sa-odabira" class="btn-secondary">Nazad</button>
        </section>

        <!-- Ekran 3: Glavni ekran akcija -->
        <section id="glavni-ekran-akcija" class="hidden">
            <h2 id="info-odabrana-trgovina">Trgovina: [Naziv Trgovine]</h2>
            <button id="btn-skeniraj-proizvod">Skeniraj proizvod</button>
            <button id="btn-pretrazi-proizvode-glavni">Pretra≈æi proizvode (Lista)</button>
            <button id="btn-promijeni-trgovinu" class="btn-secondary">Promijeni trgovinu</button>
        </section>

        <!-- Ekran 4: Ekran skeniranja -->
        <section id="ekran-skeniranja" class="hidden">
            <h2 id="info-trgovina-skeniranje">Skeniranje za [Naziv Trgovine]</h2>

            <div id="skenirani-proizvodi-lista-container" class="lista-proizvoda-container">
                <h3>Moja lista:</h3>
                <div id="skenirani-proizvodi-lista">
                    <p style="font-style:italic; text-align:center;">Lista je prazna.</p>
                </div>
                <p><strong>Ukupno: <span id="ukupno-cijena-skeniranje">0.00</span> EUR</strong></p>
            </div>

            <div id="scanner-ui-container">
                <div id="reader-container">
                    <div id="reader"></div>
                    <div id="scan-instruction">Pozicioniraj barkod unutar oznaƒçenog pravokutnika</div>
                    <button id="switch-camera-btn" title="Promijeni kameru">üîÑ</button>
                    <div id="camera-selection-overlay">
                        <ul id="camera-list"></ul>
                    </div>
                </div>
                
                <div class="scanner-controls">
                    <div class="messages">
                        <p id="scannerStatusText" class="status">Kliknite "Pokreni Skener"</p>
                        <p id="scannerErrorText" class="error"></p>
                    </div>
                    <button id="startStopScanButton">Pokreni Skener</button>
                    <div id="scanResultContainer" class="hidden">
                        <p><strong>Skenirani EAN:</strong> <span id="scannedEanResultSpan"></span></p>
                    </div>
                </div>
            </div>

            <div id="info-skeniranog-proizvoda-container" class="hidden">
                <h3>Detalji proizvoda:</h3>
                <p><strong>Naziv:</strong> <span id="skeniran-naziv"></span></p>
                <p><strong>Cijena:</strong> <span id="skenirana-cijena"></span> EUR</p>
                <p><strong>Cijena po JM:</strong> <span id="skenirana-cijena-po-jm"></span></p>
                <div>
                    <label for="skenirana-kolicina">Koliƒçina:</label>
                    <input type="number" id="skenirana-kolicina" value="1" min="1">
                </div>
                <button id="btn-dodaj-skenirano-na-listu">Dodaj na listu</button>
            </div>
            <button id="btn-nazad-sa-skeniranja" class="btn-secondary">Nazad na akcije</button>
        </section>

        <!-- Ekran 5: Ekran pretra≈æivanja i liste -->
        <section id="ekran-pretrage-i-liste" class="hidden">
            <h2>Pretraga proizvoda <span id="naziv-trgovine-za-pretragu"></span></h2>
            <input type="text" id="input-pretraga-proizvoda" placeholder="Unesi naziv proizvoda...">
            <div id="rezultati-pretrage-proizvoda-div">
                <!-- Rezultati pretrage -->
            </div>
            <h3>Moja Lista (Pretraga):</h3>
            <div id="lista-proizvoda-pretraga-container" class="lista-proizvoda-container">
                <div id="lista-proizvoda-pretraga">
                     <p style="font-style:italic; text-align:center;">Lista je prazna.</p>
                </div>
                <p><strong>Ukupno: <span id="ukupno-cijena-pretraga">0.00</span> EUR</strong></p>
            </div>
            <button id="btn-usporedi-cijene-sa-pretrage">Usporedi cijene liste</button>
            <button id="btn-nazad-sa-pretrage-na-akcije" class="btn-secondary">Nazad na akcije</button>
        </section>
        
        <!-- Ekran 6: Povijest -->
        <section id="ekran-povijesti" class="hidden">
            <h2>Povijest</h2>
            <p>Ovdje ƒáe biti prikazana povijest...</p>
            <button id="btn-nazad-sa-povijesti" class="btn-secondary">Nazad na poƒçetnu</button>
        </section>

    </main>

    <footer>
        <p>¬© <span id="trenutna-godina"></span> DUƒÜAN SKENER</p>
    </footer>

    <script src="app.js" defer></script>
</body>
</html>
